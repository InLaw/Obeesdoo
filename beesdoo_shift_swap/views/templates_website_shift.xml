<odoo>
    <!-- Add menu entries -->
    <template id="my_shift_link" name="Link to frontend portal"
              inherit_id="portal.frontend_layout">
        <xpath expr="//a[@id='o_logout']" position="before">
            <a href="/my/timeslot" class="dropdown-item" role="menuitem">bourse au shift
            </a>
        </xpath>
    </template>
    <template
            id="my_shift_title"
            name="My Shift Title">

        <h1>
            Your shifts
        </h1>
    </template>
    <template
            id="my_shift_worker_status_title"
            name="My Shift Worker Status Title">

        <h2>
            Worker status
            <span t-att-class="'badge %s pull-right' % ('badge-success' if status.can_shop else 'badge-danger',)">
                <span class="fa fa-shopping-cart"></span>
                <t t-if="status.can_shop">
                    <span class="fa fa-check"></span>
                </t>
                <t t-if="not status.can_shop">
                    <span class="fa fa-times"></span>
                </t>
            </span>
        </h2>

    </template>
     <template
            id="my_shift_next_shifts"
            name="My Shift : Next Shifts">

        <h2>
            Your next shifts
        </h2>

        <div class="alert alert-warning">
            <strong>Warning !</strong>
            For the moment public holidays are not taken into account. If your
            shift
            occures during a public holiday, you do not have to do it.
        </div>

        <t t-foreach="subscribed_shifts" t-as="shift">
            <div t-att-class="'card mb-4 %s' % highlight_class">
                <div t-att-class="'card-header %s clearfix' % highlight_header_class">
                    <div class="pull-left">
                        <span t-field="shift.template_id.start_time"/>
                        -
                        <span t-field="shift.template_id.end_time"
                              t-options='{"format": "HH:mm"}'/>
                    </div>
                    <t t-call="beesdoo_website_shift.shift_status_label">
                        <t t-set="label_css" t-value="'pull-right'"/>
                    </t>
                </div>
                <div class="card-body clearfix">
                    <t t-esc="shift.task_type_id.name"/>
                    <button
                            type="button"
                            class="btn btn-default btn-sm pull-right"
                            t-if="shift.super_coop_id.name"
                            data-toggle="modal"
                            t-att-data-target="'#super_coop-shift-%s' % shift_index"
                    >
                        <span class="fa fa-info" aria-hidden="true"></span>
                        Super Cooperator Info
                    </button>
                </div>
            </div>
        </t>

        <!-- Super Cooperator info modal -->
        <t t-foreach="subscribed_shifts" t-as="shift">
            <div class="modal fade" t-if="shift.super_coop_id.name"
                 t-att-id="'super_coop-shift-%s' % shift_index" tabindex="-1"
                 role="dialog"
                 t-att-aria-labelledby="'super_coop-shift-%s-label' % shift_index">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close"
                                    data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">Ã—</span>
                            </button>
                            <h4 class="modal-title"
                                t-att-id="'super_coop-shift-%s-label' % shift_index">
                                <t t-esc="shift.super_coop_id.name"/>
                            </h4>
                        </div>
                        <div class="modal-body">
                            <i class="fa fa-phone" aria-hidden="true"></i>
                            <t t-esc="shift.super_coop_id.phone"/>
                            <br/>
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                            <a t-att-href="'mailto:%s' % shift.super_coop_id.email">
                                <t t-esc="shift.super_coop_id.email"/>
                            </a>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary"
                                    data-dismiss="modal">Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </t>

        <div class="alert alert-warning" t-if="not subscribed_shifts">
            <strong>Warning !</strong>
            You have not yet signed up to a shift.
        </div>

    </template>
</odoo>

